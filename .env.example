# =============================================================================
# MSSQL MCP Server Configuration
# =============================================================================
# Copy this file to .env and fill in your values.
# All variables with defaults shown can be omitted to use the default value.
# =============================================================================

# -----------------------------------------------------------------------------
# Database Connection (Required)
# -----------------------------------------------------------------------------

# SQL Server hostname or IP address (required)
MSSQL_HOST=localhost

# SQL Server port (default: 1433)
MSSQL_PORT=1433

# Database name (optional - omit for server mode, set for database mode)
MSSQL_DATABASE=master

# -----------------------------------------------------------------------------
# Authentication
# -----------------------------------------------------------------------------
# Choose ONE authentication method:

# Option 1: SQL Server Authentication (username/password)
MSSQL_USER=sa
MSSQL_PASSWORD=your_password_here

# Option 2: Azure AD Authentication (service principal)
# Uncomment and fill in these values to use Azure AD instead of SQL auth:
# MSSQL_AUTH_TYPE=azuread
# MSSQL_AZURE_CLIENT_ID=your_client_id
# MSSQL_AZURE_CLIENT_SECRET=your_client_secret
# MSSQL_AZURE_TENANT_ID=your_tenant_id

# -----------------------------------------------------------------------------
# Connection Security
# -----------------------------------------------------------------------------

# Enable TLS encryption (default: true)
MSSQL_ENCRYPT=true

# Trust server certificate - for self-signed certs (default: false)
# WARNING: Only enable in development or when you trust the server certificate
MSSQL_TRUST_CERT=false

# -----------------------------------------------------------------------------
# Connection Pool
# -----------------------------------------------------------------------------

# Minimum connections in pool (default: 1)
MSSQL_POOL_MIN=1

# Maximum connections in pool (default: 10)
MSSQL_POOL_MAX=10

# Connection timeout in seconds (default: 30)
MSSQL_CONNECT_TIMEOUT=30

# Idle connection timeout in seconds (default: 300)
MSSQL_IDLE_TIMEOUT=300

# -----------------------------------------------------------------------------
# Query Execution
# -----------------------------------------------------------------------------

# Default query timeout in seconds (default: 30)
MSSQL_QUERY_TIMEOUT=30

# Maximum query timeout in seconds (default: 300)
MSSQL_MAX_QUERY_TIMEOUT=300

# Maximum result rows per query (default: 10000)
MSSQL_MAX_ROWS=10000

# Maximum query length in bytes (default: 1000000 = 1MB)
MSSQL_MAX_QUERY_LENGTH=1000000

# -----------------------------------------------------------------------------
# Security & Validation
# -----------------------------------------------------------------------------

# Query validation mode (default: standard)
# - readonly: Only SELECT queries allowed
# - standard: DML allowed (SELECT, INSERT, UPDATE, DELETE), DDL blocked
# - unrestricted: All queries allowed (use with caution)
MSSQL_VALIDATION_MODE=standard

# Enable SQL injection detection (default: true)
MSSQL_INJECTION_DETECTION=true

# -----------------------------------------------------------------------------
# Session Management
# -----------------------------------------------------------------------------

# Maximum concurrent pinned sessions (default: 10)
MSSQL_MAX_SESSIONS=10

# Session timeout in seconds (default: 3600 = 1 hour)
MSSQL_SESSION_TIMEOUT=3600

# Session cleanup interval in seconds (default: 60)
MSSQL_CLEANUP_INTERVAL=60

# -----------------------------------------------------------------------------
# Query Result Caching
# -----------------------------------------------------------------------------

# Enable query result caching (default: false)
MSSQL_ENABLE_CACHE=false

# Cache TTL in seconds (default: 60)
MSSQL_CACHE_TTL=60

# Maximum cache size in MB (default: 100)
MSSQL_CACHE_SIZE_MB=100

# Maximum number of cached entries (default: 1000)
MSSQL_CACHE_MAX_ENTRIES=1000

# -----------------------------------------------------------------------------
# HTTP Transport (requires --features http)
# -----------------------------------------------------------------------------

# HTTP server host (default: 127.0.0.1)
MSSQL_HTTP_HOST=127.0.0.1

# HTTP server port (default: 3000)
MSSQL_HTTP_PORT=3000

# Enable CORS (default: true)
MSSQL_HTTP_CORS=true

# CORS allowed origins (comma-separated, empty = all origins)
MSSQL_HTTP_CORS_ORIGINS=

# Request timeout in seconds (default: 30)
MSSQL_HTTP_TIMEOUT=30

# Enable rate limiting (default: true)
MSSQL_HTTP_RATE_LIMIT=true

# Rate limit requests per minute (default: 100)
MSSQL_HTTP_RATE_LIMIT_RPM=100

# -----------------------------------------------------------------------------
# Telemetry (requires --features telemetry)
# -----------------------------------------------------------------------------

# Enable OpenTelemetry export (default: false)
MSSQL_TELEMETRY_ENABLED=false

# OTLP endpoint for traces and metrics
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317

# Service name for telemetry
OTEL_SERVICE_NAME=mssql-mcp-server

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------

# Log level: error, warn, info, debug, trace (default: info)
RUST_LOG=info

# Log format: json, pretty (default: pretty for development)
# RUST_LOG_FORMAT=pretty
